- **一、数字图像处理基础**
  - 图像形成模型
    - 入射分量，反射分量（透射系数）$f(x,y) = i(x,y)r(x,y)$ （取值范围）
  - 取样与量化
    - 取样，量化，灰度级，动态范围，对比度，空间分辨率（2044 dpi），灰度分辨率
    - 内插 $\spadesuit$
      - 最近邻内插
      - 双线性内插 $v(x,y) = ax+by+cxy+d$
      - 双三次内插 $v(x,y)= \sum_{i=1}^3\sum_{j=0}^3a_{ij}x^iy^j$ 
      - 样条，小波
  - 像素间的关系
    - 邻接性（4,8,m），连通性（连通分量，连通集），区域（邻接区域，前景，背景），边界（内边界，外边界-闭合通路）
    - 距离度量：欧式距离，城市街区距离，棋盘距离
  - 数学工具
    - 阵列与矩阵操作：阵列操作（默认）与矩阵操作
      - 平均-降噪（空间上与时间上）
      - 相减-增强差别
      - 相除/相乘-校正阴影
    - 线性与非线性操作
    - 集合与逻辑操作
    - 空间操作
      - 单像素操作 $s=T(z)$
      - 领域操作 $S_{xy}$
      - 空间变换 $\spadesuit$
        - 仿射变换 $(x,y)=T{(v,w)}​$ T为3x3矩阵
          - 前向映射
          - 反向映射（常用）
        - 图像配准 $x=a_1v+b_1w+c_1vw+d_1$ $y=a_2v+b_2w+c_2vw+d_2$
    - 向量与矩阵操作
    - 图像变换：时域-频域
    - 概率方法

- **二、灰度变换与空间滤波**
  - 灰度变换函数
    - 图像反转 $s=L-1-r$
    - 对数变换 $s=clog(1+r)​$ $c=const,r\geq0​$ 
      - 扩展低灰度级的值，压缩高灰度级的值
      - 标定傅里叶频谱图像
    - 幂律（伽马）变换 $s=cr^\gamma$ $c,\gamma=const>0$
      - 既可以扩展暗值（处理整体偏暗的图像）也可以扩展亮值（处理整体偏亮的图像）
      - 伽马校正：图像获取、打印和显示的各种设备根据幂律产生响应 $\gamma_2=\frac{1}{\gamma_1}$
    - 分段线性变换函数
      - 对比度拉伸->阈值处理函数（二值图像）
      - 灰度级分层
      - 比特平面分层
  - 直方图处理 
    - PDF-概率密度函数	CDF-累积分布函数
    - 直方图均衡 $s=T(r)\ \ 0\leq{r}\leq{L-1}$  所谓均衡：$p_r(s)=\frac{1}{L-1}\  {0}\leq{s}\leq{L-1}$ ($p_r(s)=p_r(r)|\frac{dr}{ds}|$) $\spadesuit$
      - 连续：$s=T(r)=(L-1)\int_{0}^{r}p_r(w)dw​$
      - 离散：$s_k=T(r_k)=(L-1)\sum_{j=0}^{k}p_r(r_j)=\frac{L-1}{MN}\sum_{j=0}^kn_j$ 再取整
      - 自适应对比度增强
    - 直方图匹配（规定化）$\spadesuit$
      - 查表法
      - 过程
        - 对输入图像计算直方图均衡变换并取整（四舍五入）	r->s的映射
        - 对给定直方图计算均衡变换并取整（四舍五入）并存到一个表中   z->s的映射
        - 将上述两个映射合并（当s->z映射不唯一时取最小，没有时取最近）   r->的映射
      - 直方图规定化在大多数时候都是试凑的过程，对任何一个给定的增强任务都必须借助于实际分析来确定直方图的规则
    - 局部直方图处理
      - 在 $S_{xy}$ 邻域中进行直方图均衡或规定化
      - 消除棋盘效应
    - 在图像增强中使用直方图统计
      - $r$ 关于其均值的 $n$ 阶矩定义：  $\mu_n(r)=\sum_{i=0}^{L-1}(r_i-m)^np(r_i)$   $m=\sum_{i=0}^{L-1}r_ip(r_i)$
      - 取样均值：$m=\frac{1}{MN}\sum_{x=0}^{M-1}\sum_{y=0}^{N-1}f(x,y)$   取样方差：$\sigma^2=\frac{1}{MN}\sum_{x=0}^{M-1}\sum_{y=0}^{N-1}(f(x,y)-m)^2$
      - $S_{xy}$ 可以定义局部均值和局部方差 -> 局部增强 
  - 空间滤波
    - 基础

      - 相关与卷积
      - 滤波器模板
        - 高斯函数	$h(x,y)=e^{-\frac{x^2+y^2}{2\sigma^2}}$

    - 平滑空间滤波器 $\spadesuit​$

      - 线性滤波器
        - 盒状滤波器与非盒状滤波器
        - $g(x,y)=\frac{\sum_{s=-a}^a\sum_{t=-b}^bw(s,t)f(x+s,y+t)}{\sum_{s=-a}^a\sum_{t=-b}^bw(s,t)}$
      - 非线性(统计排序)滤波器
        - 最大/小值滤波器，中值滤波器（椒盐噪声）

    - 锐化空间滤波器 $\spadesuit$

      - 基础

        - 一阶微分：$\frac{\partial f}{\partial x}=f(x+1)-f(x)$
        - 二阶微分：$\frac{\partial^2 f}{\partial x^2}=f(x+1)+f(x-1)-2f(x)$
        - 二阶微分在增强细节方面比一阶微分好得多

      - 拉普拉斯算子

        - $\nabla^2 f(x,y)=f(x+1,y)+f(x-1,y)+f(x,y+1)+f(x,y-1)-4f(x,y)$ 

        -  滤波器模板

          ​	$\left[\begin{matrix}0&1&0\\1&-4&1\\0&1&0\\\end{matrix}\right] $$\left[\begin{matrix}1 & 1 & 1 \\ 1& -8 & 1 \\1 & 1 & 1\end{matrix}\right] $  $\left[\begin{matrix}0&-1&0\\-1&4&-1\\0&-1&0\\\end{matrix}\right]$$\left[\begin{matrix}-1&-1&-1 \\-1&8&-1\\-1&-1&-1\end{matrix}\right]$ 

        - $g(x,y)=f(x,y)+c(\nabla^2f(x,y))\  c=-1/1$
        - 拉普拉斯滤波后的图像的标定

      - 非锐化掩蔽与高提升滤波

        - $g(x,y)=f(x,y)+k*g_mask(x,y)=f(x,y)+k*(f(x,y)-\overline{f(x,y)})​$
        - k=1---非锐化掩蔽	k>1---高提升滤波

      - 梯度（一阶微分）

        - $M(x,y)=mag(\nabla f)=\sqrt{g_x^2+g_y^2}\approx|g_x|+|g_y|$ 没有各向同性
        - Roberts算子
        - Sobel算子
        - 模板的系数之和为0以保证在灰度恒定区域响应为0

- **三、频率域滤波**

  - 基础
    - 单变量
      - 连续：$F(\mu)=\int_{-\infty}^\infty f(t)e^{-j2\pi\mu t}dt$, $f(t)=\int_{-\infty}^\infty F(\mu)e^{j2\pi\mu t}d\mu$    	$w=2\pi\mu$
      - 离散：$F(u)=\sum_{x=0}^{M-1}f(x)e^{-j2\pi ux/M}​$ , $f(x)=\frac{1}{M}\sum_{u=0}^{M-1}F(u)e^{j2\pi ux/M}​$ 
    - 二维变量
      - 连续：$F(\mu,v)=\int_{-\infty}^\infty\int_{-\infty}^\infty f(t,z)e^{-j2\pi(\mu t+vz)}dtdz$, $f(t)=\int_{-\infty}^\infty \int_{-\infty}^\infty F(\mu,v)e^{j2\pi(\mu t+vz)}d\mu dv$  
      - 离散：$F(u,v)=\sum_{x=0}^{M-1}\sum_{y=0}^{N-1}f(x,y)e^{-j2\pi (ux/M+vy/N)}$ , $f(x,y)=\frac{1}{MN}\sum_{u=0}^{M-1}\sum_{v=0}^{N-1}F(u,v)e^{j2\pi (ux/M+vy/N)}$
    - 空间混淆与时间混淆，过取样与欠取样，莫尔（波纹）模式
    - 二维离散傅里叶变换的性质
      - $f(x,y)(-1)^{(x+y)}\Leftrightarrow F(u-M/2,v-N/2)$
      - $F(u,v)=|F(u,v)|e^{j\phi (u,v)}​$        其中：
        - $|F(u,v)|$ 表示傅里叶谱（频谱），$\phi (u,v)=arctan\frac{I}{R}$ 表示相角
        - $P(u,v)=|F(u,v)|^2$ 表示功率谱，$|F(0,0)|=MN|\overline{f}(x,y)|$ 称为直流(dc)分量------对数变换以标定 $1+log|F(u,v)|$
        - 谱对图像的平移不敏感，随图像旋转而以相同的角度旋转
      - 卷积
        - $f(x,y)\star h(x,y)=\sum_{m=0}^{M-1}\sum_{n=0}^{N-1}f(m,n)h(x-m,y-n)$
        - 周期的靠近导致缠绕错误-----零填充
          - $P\geq A+C-1$ , $Q\geq B+D-1$ 
          - P，Q最好选择满足上述条件的最小偶整数
  - 频率域滤波基础
    - 振铃现象：任何实现0填充的滤波器的空间截断将引入不连续性，通常在频域表现为振铃现象
    - 步骤
      - 给定$M\times N$输入图像$f(x,y)$ ，选择$P=2M,Q=2N$
      - 零填充得到$f_p(x,y)​$
      - $F(u,v)=\Im ((-1)^{x+y}f_p(x,y)) $
      - $G(u,v)=H(u,v)F(u,v)$, $H(u,v)$ 大小为$M\times N$, 中心在$(P/2,Q/2)$ 处的实对称滤波函数
      - $g_p(x,y)=(real(\Im^{-1}(G(u,v))))(-1)^{x+y}$ 取实部是为了忽略计算不准确导致的寄生复分量
      - 从$g_p(x,y)$ 的左上象限提取$M\times N$ 区域得到最终结果$g(x,y)$
  - 平滑图像
    - 理想低通滤波器（ILPF）
      - $H(u,v)=\begin{cases}1, & D(u,v)\leq D_0 \\ 0, & D(u,v)>D_0 \end{cases}$
      - 有振铃，截止频率半径越大，越不明显
    - 布特沃斯低通滤波器（BLPF）
      - $H(u,v)=\frac{1}{1+(D(u,v)/D_0)^{2n}}$ 
      - 一阶没有可见的振铃现象，二阶很难察觉，更高阶会很明显
    - 高斯低通滤波器（GLPF）
      - $H(u,v)=e^{-\frac{D^2(u,v)}{2D_0^2}}$
      - 没有振铃，适用于医学成像等任何人工缺陷都不可接受的情况
    - $sinc$函数的中心波瓣是引起模糊的主因，外侧较小的波瓣是造成振铃的主因(ILPF:函数展开度与半径成反比，半径越大，越趋近于冲激)
  - 锐化图像
    - IHPF
    - BHPF
    - GHPF
    - 拉普拉斯算子
      - $H(u,v)=-4\pi^2D^2(u,v)$
      - $g(x,y)=f(x,y)+c\nabla^2f(x,y)\quad c=-1$
      - 标定
    - 高频强调滤波
      - $g(x,y)=\Im^{-1}((k_1+k_2*H_{HP}(u,v))F(u,v))\quad k_1\geq0\quad k_2\geq0$
    - 同态滤波
      - $H(u,v)=(\gamma_H-\gamma_L)(1-e^{c(D^2(u,v)/D_0^2)})+\gamma_L\quad \gamma_L<c=const<\gamma_H\mbox{控制函数坡度的锐利度}$
      - 照射分量-缓慢的空间变化（低频）；反射分量-突变（高频）

- **四、图像复原与重建**

  - 图像退化/复原过程的模型
    - 目的：获得原始图像的一个估计$\hat f(x,y)$
    - 退化模型：$G(u,v)=H(u,v)F(u,v)+N(u,v)$
    - 复原模型：$g(x,y)\rightarrow \hat f(x,y)$
  - 噪声模型
    - 各种噪声
      - 白噪声：傅里叶谱为常量
      - 高斯噪声  $p(z)=\frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{(z-\overline z)^2}{2\sigma^2}}$
      - 瑞利噪声
      - 爱尔兰（伽马）噪声  
      - 指数噪声  $p(z)=\begin{cases}ae^{-az},&z\geq0\\0&z<0\end{cases}​$  均值$\overline z=\frac{1}{a}​$ ，方差$\sigma^2=\frac{1}{a^2}​$
      - 均匀噪声  $p(z)=\begin{cases}\frac{1}{b-a},&a\leq z\leq b\\0,&\mbox{其他}\end{cases}$  均值$\overline z=\frac{a+b}{2}$ ，方差$\sigma^2=\frac{(b-a)^2}{12}$
      - 脉冲（椒盐）噪声  $p(z)=\begin{cases}P_a&z=a\\P_b&z=b\\1-P_a-P_b&\mbox{其他}\end{cases}$
    - 周期噪声---可以通过频率域滤波显著减少
    - 噪声参数的估计
  - 消除噪声---空间滤波
    - 均值滤波器
      - 算术均值滤波器
      - 几何均值滤波器
      - 谐波均值滤波器
      - 逆谐波均值滤波器
    - 统计排序滤波器
      - 中值滤波器
      - 最值滤波器
      - 中点滤波器
      - 修正的阿尔法均值滤波器
    - 自适应滤波器
      - 自适应局部降低噪声滤波器
      - 自适应中值滤波器
  - 频率域消除周期噪声
  - 线性、位置不变的退化（前提假设）
    - 线性=加性+均匀性（齐次性+叠加性）
    - 位置不变：$H(f(x-\alpha,y-\beta))=g(x-\alpha,y-\beta)$  图像中任意一点的响应只取决于该点处的输入值，而与其位置无关
    - 许多类型的退化可以近似为线性、位置不变的过程
  - 估计退化函数
    - 观察法
      - 寻找一个有很强信号内容的区域（如高对比度区域）
      - 处理该区域得到尽可能不模糊的结果
      - 得到退化函数
    - 实验法
      - 与获取退化的图像的设备的相似的装置
      - 用一个亮点模拟冲激
      - 利用退化模型得到退化函数
    - 数学建模法
      - 大气湍流模型 $H(u,v)=e^{-k(u^2+v^2)^{5/6}}$  具体使用时注意要进行平移使函数居中:$H(u,v)=e^{-k((u-M/2)^2+(v-N/2)^2)^{5/6}}$
      - 均匀线性运动模糊（从基本原理开始推导）
        - $g(x,y)=\int_0^Tf(x-x_0(t),y-y_0(t))dt$
        - $G(u,v)=F(x,y)\int_0^Te^{-j2\pi(ux_0(t)+vy_0(t))}dt=F(u,v)H(u,v)$ 
        - $H(u,v)=\frac{T}{\pi(ua+vb)}sin(\pi(ua+vb))e^{-j\pi(ua+vb)}$
  - 逆滤波
    - $\hat F(u,v)=\frac{G(u,v)}{H(u,v)}=F(u,v)+\frac{N(u,v)}{H(u,v)}$
      - $N(u,v)$未知
      - 当退化函数趋近于0时，$N(u,v)/H(u,v)$将支配估计值---限制滤波频率使其接近原点
  - 最小均方误差滤波（维纳滤波）
    - 
  - 约束最小二乘滤波